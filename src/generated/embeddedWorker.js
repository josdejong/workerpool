/**
 * embeddedWorker.js contains an embedded version of worker.js.
 * This file is automatically generated,
 * changes made in this file will be overwritten.
 */
module.exports = "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t(require(\"events\")):\"function\"==typeof define&&define.amd?define([\"events\"],t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).worker=t(e.require$$0)}(this,(function(e){\"use strict\";function t(e){return t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},t(e)}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}var r={};var o=function(e,t){this.message=e,this.transfer=t},i={};function s(e,t){var n=this;if(!(this instanceof s))throw new SyntaxError(\"Constructor must be called with the new operator\");if(\"function\"!=typeof e)throw new SyntaxError(\"Function parameter handler(resolve, reject) missing\");var r=[],o=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var i=function(e,t){r.push(e),o.push(t)};this.then=function(e,t){return new s((function(n,r){var o=e?u(e,n,r):n,s=t?u(t,n,r):r;i(o,s)}),n)};var f=function(e){return n.resolved=!0,n.rejected=!1,n.pending=!1,r.forEach((function(t){t(e)})),i=function(t,n){t(e)},f=d=function(){},n},d=function(e){return n.resolved=!1,n.rejected=!0,n.pending=!1,o.forEach((function(t){t(e)})),i=function(t,n){n(e)},f=d=function(){},n};this.cancel=function(){return t?t.cancel():d(new c),n},this.timeout=function(e){if(t)t.timeout(e);else{var r=setTimeout((function(){d(new a(\"Promise timed out after \"+e+\" ms\"))}),e);n.always((function(){clearTimeout(r)}))}return n},e((function(e){f(e)}),(function(e){d(e)}))}function u(e,t,n){return function(r){try{var o=e(r);o&&\"function\"==typeof o.then&&\"function\"==typeof o.catch?o.then(t,n):t(o)}catch(e){n(e)}}}function c(e){this.message=e||\"promise cancelled\",this.stack=(new Error).stack}function a(e){this.message=e||\"timeout exceeded\",this.stack=(new Error).stack}return s.prototype.catch=function(e){return this.then(null,e)},s.prototype.always=function(e){return this.then(e,e)},s.all=function(e){return new s((function(t,n){var r=e.length,o=[];r?e.forEach((function(e,i){e.then((function(e){o[i]=e,0==--r&&t(o)}),(function(e){r=0,n(e)}))})):t(o)}))},s.defer=function(){var e={};return e.promise=new s((function(t,n){e.resolve=t,e.reject=n})),e},c.prototype=new Error,c.prototype.constructor=Error,c.prototype.name=\"CancellationError\",s.CancellationError=c,a.prototype=new Error,a.prototype.constructor=Error,a.prototype.name=\"TimeoutError\",s.TimeoutError=a,i.Promise=s,function(n){e.addAbortListener;var r=o,s=i.Promise,u=\"__workerpool-cleanup__\",c={exit:function(){}},a={addAbortListener:function(e){c.abortListeners.push(e)},emit:c.emit};if(\"undefined\"!=typeof self&&\"function\"==typeof postMessage&&\"function\"==typeof addEventListener)c.on=function(e,t){addEventListener(e,(function(e){t(e.data)}))},c.send=function(e,t){t?postMessage(e,t):postMessage(e)};else{if(\"undefined\"==typeof process)throw new Error(\"Script must be executed as a worker\");var f;try{f=require(\"worker_threads\")}catch(e){if(\"object\"!==t(e)||null===e||\"MODULE_NOT_FOUND\"!==e.code)throw e}if(f&&null!==f.parentPort){var d=f.parentPort;c.send=d.postMessage.bind(d),c.on=d.on.bind(d),c.exit=process.exit.bind(process)}else c.on=process.on.bind(process),c.send=function(e){process.send(e)},c.on(\"disconnect\",(function(){process.exit(1)})),c.exit=process.exit.bind(process)}function l(e){return Object.getOwnPropertyNames(e).reduce((function(t,n){return Object.defineProperty(t,n,{value:e[n],enumerable:!0})}),{})}function p(e){return e&&\"function\"==typeof e.then&&\"function\"==typeof e.catch}c.methods={},c.methods.run=function(e,t){var n=new Function(\"return (\"+e+\").apply(this, arguments);\");return n.worker=a,n.apply(n,t)},c.methods.methods=function(){return Object.keys(c.methods)},c.terminationHandler=void 0,c.abortListenerTimeout=1e3,c.abortListeners=[],c.cleanupAndExit=function(e){var t=function(){c.exit(e)};if(!c.terminationHandler)return t();var n=c.terminationHandler(e);p(n)?n.then(t,t):t()},c.tryCleanup=function(){if(c.abortListeners.length){var e,t=c.abortListeners.map((function(e){return e()})),n=new s((function(t,n){e=setTimeout(n,c.abortListenerTimeout)})),r=s.all(t).then((function(){clearTimeout(e),c.abortListeners.length||(c.abortListeners=[])}),(function(){clearTimeout(e),c.exit()}));return s.all([r,n])}return new s((function(e,t){t()}))};var m=null;c.on(\"message\",(function(e){if(\"__workerpool-terminate__\"===e)return c.cleanupAndExit(0);if(e.method===u)return c.tryCleanup().then((function(){c.send({id:e.id,method:u,error:null})})).catch((function(t){c.send({id:e.id,method:u,error:t?l(t):null}),c.exit()}));try{var t=c.methods[e.method];if(!t)throw new Error('Unknown method \"'+e.method+'\"');m=e.id;var n=t.apply(t,e.params);p(n)?n.then((function(t){t instanceof r?c.send({id:e.id,result:t.message,error:null},t.transfer):c.send({id:e.id,result:t,error:null}),m=null})).catch((function(t){c.send({id:e.id,result:null,error:l(t)}),m=null})):(n instanceof r?c.send({id:e.id,result:n.message,error:null},n.transfer):c.send({id:e.id,result:n,error:null}),m=null)}catch(t){c.send({id:e.id,result:null,error:l(t)})}})),c.register=function(e,t){if(e)for(var n in e)e.hasOwnProperty(n)&&(c.methods[n]=e[n],c.methods[n].worker=a);t&&(c.terminationHandler=t.onTerminate,c.abortListenerTimeout=t.abortListenerTimeout||1e3),c.send(\"ready\")},c.emit=function(e){if(m){if(e instanceof r)return void c.send({id:m,isEvent:!0,payload:e.message},e.transfer);c.send({id:m,isEvent:!0,payload:e})}},n.add=c.register,n.emit=c.emit}(r),n(r)}));\n//# sourceMappingURL=worker.min.js.map\n";
