/**
 * embeddedWorker.js contains an embedded version of worker.js.
 * This file is automatically generated,
 * changes made in this file will be overwritten.
 */
module.exports = "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).worker=t()}(this,(function(){\"use strict\";function e(t){return e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},e(t)}function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}var n={};var r=function(e,t){this.message=e,this.transfer=t},o={};function i(e,t){var n=this;if(!(this instanceof i))throw new SyntaxError(\"Constructor must be called with the new operator\");if(\"function\"!=typeof e)throw new SyntaxError(\"Function parameter handler(resolve, reject) missing\");var r=[],o=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var a=function(e,t){r.push(e),o.push(t)};this.then=function(e,t){return new i((function(n,r){var o=e?u(e,n,r):n,i=t?u(t,n,r):r;a(o,i)}),n)};var f=function(e){return n.resolved=!0,n.rejected=!1,n.pending=!1,r.forEach((function(t){t(e)})),a=function(t,n){t(e)},f=d=function(){},n},d=function(e){return n.resolved=!1,n.rejected=!0,n.pending=!1,o.forEach((function(t){t(e)})),a=function(t,n){n(e)},f=d=function(){},n};this.cancel=function(){return t?t.cancel():d(new s),n},this.timeout=function(e){if(t)t.timeout(e);else{var r=setTimeout((function(){d(new c(\"Promise timed out after \"+e+\" ms\"))}),e);n.always((function(){clearTimeout(r)}))}return n},e((function(e){f(e)}),(function(e){d(e)}))}function u(e,t,n){return function(r){try{var o=e(r);o&&\"function\"==typeof o.then&&\"function\"==typeof o.catch?o.then(t,n):t(o)}catch(e){n(e)}}}function s(e){this.message=e||\"promise cancelled\",this.stack=(new Error).stack}function c(e){this.message=e||\"timeout exceeded\",this.stack=(new Error).stack}return i.prototype.catch=function(e){return this.then(null,e)},i.prototype.always=function(e){return this.then(e,e)},i.prototype.finally=function(e){var t=this,n=function(){return new i((function(e){return e()})).then(e).then((function(){return t}))};return this.then(n,n)},i.all=function(e){return new i((function(t,n){var r=e.length,o=[];r?e.forEach((function(e,i){e.then((function(e){o[i]=e,0==--r&&t(o)}),(function(e){r=0,n(e)}))})):t(o)}))},i.defer=function(){var e={};return e.promise=new i((function(t,n){e.resolve=t,e.reject=n})),e},s.prototype=new Error,s.prototype.constructor=Error,s.prototype.name=\"CancellationError\",i.CancellationError=s,c.prototype=new Error,c.prototype.constructor=Error,c.prototype.name=\"TimeoutError\",i.TimeoutError=c,o.Promise=i,function(t){var n=r,i=o.Promise,u=\"__workerpool-cleanup__\",s={exit:function(){}},c={addAbortListener:function(e){s.abortListeners.push(e)},emit:s.emit};if(\"undefined\"!=typeof self&&\"function\"==typeof postMessage&&\"function\"==typeof addEventListener)s.on=function(e,t){addEventListener(e,(function(e){t(e.data)}))},s.send=function(e,t){t?postMessage(e,t):postMessage(e)};else{if(\"undefined\"==typeof process)throw new Error(\"Script must be executed as a worker\");var a;try{a=require(\"worker_threads\")}catch(t){if(\"object\"!==e(t)||null===t||\"MODULE_NOT_FOUND\"!==t.code)throw t}if(a&&null!==a.parentPort){var f=a.parentPort;s.send=f.postMessage.bind(f),s.on=f.on.bind(f),s.exit=process.exit.bind(process)}else s.on=process.on.bind(process),s.send=function(e){process.send(e)},s.on(\"disconnect\",(function(){process.exit(1)})),s.exit=process.exit.bind(process)}function d(e){return Object.getOwnPropertyNames(e).reduce((function(t,n){return Object.defineProperty(t,n,{value:e[n],enumerable:!0})}),{})}function l(e){return e&&\"function\"==typeof e.then&&\"function\"==typeof e.catch}s.methods={},s.methods.run=function(e,t){var n=new Function(\"return (\"+e+\").apply(this, arguments);\");return n.worker=c,n.apply(n,t)},s.methods.methods=function(){return Object.keys(s.methods)},s.terminationHandler=void 0,s.abortListenerTimeout=1e3,s.abortListeners=[],s.cleanupAndExit=function(e){var t=function(){s.exit(e)};if(!s.terminationHandler)return t();var n=s.terminationHandler(e);l(n)?n.then(t,t):t()},s.tryCleanup=function(){if(s.abortListeners.length){var e,t=s.abortListeners.map((function(e){return e()})),n=new i((function(t,n){e=setTimeout(n,s.abortListenerTimeout)})),r=i.all(t).then((function(){clearTimeout(e),s.abortListeners.length||(s.abortListeners=[])}),(function(){clearTimeout(e),s.exit()}));return i.all([r,n])}return new i((function(e,t){t()}))};var p=null;s.on(\"message\",(function(e){if(\"__workerpool-terminate__\"===e)return s.cleanupAndExit(0);if(e.method===u)return s.tryCleanup().then((function(){s.send({id:e.id,method:u,error:null})})).catch((function(t){s.send({id:e.id,method:u,error:t?d(t):null}),s.exit()}));try{var t=s.methods[e.method];if(!t)throw new Error('Unknown method \"'+e.method+'\"');p=e.id;var r=t.apply(t,e.params);l(r)?r.then((function(t){t instanceof n?s.send({id:e.id,result:t.message,error:null},t.transfer):s.send({id:e.id,result:t,error:null}),p=null})).catch((function(t){s.send({id:e.id,result:null,error:d(t)}),p=null})):(r instanceof n?s.send({id:e.id,result:r.message,error:null},r.transfer):s.send({id:e.id,result:r,error:null}),p=null)}catch(t){s.send({id:e.id,result:null,error:d(t)})}})),s.register=function(e,t){if(e)for(var n in e)e.hasOwnProperty(n)&&(s.methods[n]=e[n],s.methods[n].worker=c);t&&(s.terminationHandler=t.onTerminate,s.abortListenerTimeout=t.abortListenerTimeout||1e3),s.send(\"ready\")},s.emit=function(e){if(p){if(e instanceof n)return void s.send({id:p,isEvent:!0,payload:e.message},e.transfer);s.send({id:p,isEvent:!0,payload:e})}},t.add=s.register,t.emit=s.emit}(n),t(n)}));\n//# sourceMappingURL=worker.min.js.map\n";
